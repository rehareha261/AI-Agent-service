{"event": "\u2705 Claude provider initialis\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:17.263464Z"}
{"event": "\u2705 OpenAI provider initialis\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:17.307557Z"}
{"event": "\u2705 Client OpenAI initialis\u00e9 pour analyse sentiment", "level": "info", "timestamp": "2025-09-25T07:13:17.385619Z"}
 
 -------------- celery@MBP130-SMARTELIA-2.local v5.3.4 (emerald-rush)
--- ***** ----- 
-- ******* ---- macOS-13.6.6-x86_64-i386-64bit 2025-09-25 10:13:17
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         ai_agent_background:0x108adfa10
- ** ---------- .> transport:   amqp://ai_agent_user:**@localhost:5672/ai_agent
- ** ---------- .> results:     postgresql://admin:**@localhost:5432/ai_agent_admin
- *** --- * --- .> concurrency: 1 (prefork)
-- ******* ---- .> task events: ON
--- ***** ----- 
 -------------- [queues]
                .> ai_generation    exchange=ai_agent(topic) key=ai.*
                .> dlq              exchange=ai_agent(topic) key=dead_letter.*
                .> tests            exchange=ai_agent(topic) key=test.*
                .> webhooks         exchange=ai_agent(topic) key=webhook.*
                .> workflows        exchange=ai_agent(topic) key=workflow.*

[tasks]
  . ai_agent_background.cleanup_old_tasks
  . ai_agent_background.execute_workflow
  . ai_agent_background.generate_code
  . ai_agent_background.handle_dead_letter
  . ai_agent_background.process_monday_webhook
  . ai_agent_background.run_tests

[2025-09-25 10:13:19,268: INFO/MainProcess] Connected to amqp://ai_agent_user:**@127.0.0.1:5672/ai_agent
[2025-09-25 10:13:19,278: INFO/MainProcess] mingle: searching for neighbors
[2025-09-25 10:13:20,319: INFO/MainProcess] mingle: all alone
[2025-09-25 10:13:20,526: INFO/MainProcess] Task ai_agent_background.process_monday_webhook[aa67daff-4175-4db3-b80c-72d139a9c98c] received
[2025-09-25 10:13:20,527: WARNING/MainProcess] {"worker": "<Consumer: celery@MBP130-SMARTELIA-2.local (running)>", "broker": "RabbitMQ", "backend": "PostgreSQL", "event": "\ud83d\ude80 Celery worker pr\u00eat", "level": "info", "timestamp": "2025-09-25T07:13:20.527413Z"}
[2025-09-25 10:13:20,633: WARNING/MainProcess] {"event": "\u2705 Service de persistence initialis\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:20.633727Z"}
[2025-09-25 10:13:20,634: WARNING/MainProcess] {"event": "\u2705 Persistence base de donn\u00e9es initialis\u00e9e", "level": "info", "timestamp": "2025-09-25T07:13:20.634745Z"}
[2025-09-25 10:13:20,635: WARNING/MainProcess] {"event": "\ud83d\ude80 D\u00e9marrage du monitoring custom", "level": "info", "timestamp": "2025-09-25T07:13:20.635121Z"}
[2025-09-25 10:13:20,736: WARNING/MainProcess] {"event": "\u2705 4 t\u00e2ches de monitoring lanc\u00e9es", "level": "info", "timestamp": "2025-09-25T07:13:20.736500Z"}
[2025-09-25 10:13:20,737: WARNING/MainProcess] {"event": "\ud83d\udc15 Surveillance du monitoring arr\u00eat\u00e9e", "level": "info", "timestamp": "2025-09-25T07:13:20.737209Z"}
[2025-09-25 10:13:20,737: WARNING/MainProcess] {"event": "\ud83d\udcca Agr\u00e9gateur de m\u00e9triques arr\u00eat\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:20.737536Z"}
[2025-09-25 10:13:20,737: WARNING/MainProcess] {"event": "\ud83e\uddf9 Nettoyeur de m\u00e9triques arr\u00eat\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:20.737745Z"}
[2025-09-25 10:13:20,738: WARNING/MainProcess] {"event": "\ud83d\udea8 V\u00e9rificateur d'alertes arr\u00eat\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:20.737948Z"}
[2025-09-25 10:13:20,738: WARNING/MainProcess] {"event": "\u2705 Monitoring initialis\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:20.738690Z"}
[2025-09-25 10:13:20,860: WARNING/ForkPoolWorker-1] {"task_id": "aa67daff-4175-4db3-b80c-72d139a9c98c", "monday_item_id": 5011841281, "queue": "webhooks", "routing_key": "webhook.monday", "event": "\ud83d\ude80 D\u00e9marrage traitement webhook Celery", "level": "info", "timestamp": "2025-09-25T07:13:20.860040Z"}
[2025-09-25 10:13:20,864: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udce8 R\u00e9ception d'un webhook Monday.com", "level": "info", "timestamp": "2025-09-25T07:13:20.864806Z"}
[2025-09-25 10:13:20,995: WARNING/ForkPoolWorker-1] {"event": "\u2705 T\u00e2che extraite du webhook: Ajouter une nouvelle fonctionnalit\u00e9 de monitoring des co\u00fbts IA dans l'admin backend", "level": "info", "timestamp": "2025-09-25T07:13:20.995220Z"}
[2025-09-25 10:13:20,996: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udce5 R\u00e9cup\u00e9ration des d\u00e9tails pour l'item Monday.com: 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:20.996009Z"}
[2025-09-25 10:13:22,355: INFO/ForkPoolWorker-1] HTTP Request: POST https://api.monday.com/v2 "HTTP/1.1 200 OK"
[2025-09-25 10:13:22,358: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd0d DEBUG - Colonnes disponibles dans Monday.com: ['no_id', 'no_id', 'no_id']", "level": "info", "timestamp": "2025-09-25T07:13:22.358007Z"}
[2025-09-25 10:13:22,358: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd0d Recherche de description dans les updates Monday.com...", "level": "info", "timestamp": "2025-09-25T07:13:22.358671Z"}
[2025-09-25 10:13:24,240: INFO/ForkPoolWorker-1] HTTP Request: POST https://api.monday.com/v2 "HTTP/1.1 200 OK"
[2025-09-25 10:13:24,243: WARNING/ForkPoolWorker-1] {"event": "\u2705 Item 5011841281 trouv\u00e9, ID confirm\u00e9: 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:24.243109Z"}
[2025-09-25 10:13:24,244: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udccb 1 updates valides trouv\u00e9es pour item 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:24.244001Z"}
[2025-09-25 10:13:24,244: WARNING/ForkPoolWorker-1] {"event": "\u2705 1 updates totales (updates + replies) r\u00e9cup\u00e9r\u00e9es pour item 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:24.244713Z"}
[2025-09-25 10:13:24,245: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udcdd Description trouv\u00e9e dans update: Description: Ajouter un endpoint `/admin/costs` pour visualiser les co\u00fbts par provider Repository: h...", "level": "info", "timestamp": "2025-09-25T07:13:24.245585Z"}
[2025-09-25 10:13:24,246: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udcc4 Description finale: Description: Ajouter un endpoint `/admin/costs` pour visualiser les co\u00fbts par provider Repository: h...", "level": "info", "timestamp": "2025-09-25T07:13:24.246318Z"}
[2025-09-25 10:13:24,248: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udcdd Analyse de la description pour enrichissement: Description: Ajouter un endpoint `/admin/costs` pour visualiser les co\u00fbts par provider Repository: h...", "level": "info", "timestamp": "2025-09-25T07:13:24.247974Z"}
[2025-09-25 10:13:24,248: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd17 URL de base (avant enrichissement): ", "level": "info", "timestamp": "2025-09-25T07:13:24.248546Z"}
[2025-09-25 10:13:24,250: WARNING/ForkPoolWorker-1] {"event": "\u2705 URL GitHub trouv\u00e9e avec pattern 1 dans description: https://github.com/reharehavycode261/Coding-agent-test", "level": "info", "timestamp": "2025-09-25T07:13:24.250189Z"}
[2025-09-25 10:13:24,250: WARNING/ForkPoolWorker-1] {"event": "\u2705 Repository URL d\u00e9finie depuis la description: https://github.com/reharehavycode261/Coding-agent-test", "level": "info", "timestamp": "2025-09-25T07:13:24.250800Z"}
[2025-09-25 10:13:24,253: WARNING/ForkPoolWorker-1] {"event": "\ud83c\udfaf URL GitHub finale (apr\u00e8s enrichissement): https://github.com/reharehavycode261/Coding-agent-test", "level": "info", "timestamp": "2025-09-25T07:13:24.253379Z"}
[2025-09-25 10:13:24,254: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udccb T\u00e2che cr\u00e9\u00e9e: Ajouter une nouvelle fonctionnalit\u00e9 de monitoring des co\u00fbts IA dans l'admin backend (Branche: feature/ajouter-une-nouvelle-fonctionnalit\u00e9-de-monitoring-0925)", "level": "info", "timestamp": "2025-09-25T07:13:24.254445Z"}
[2025-09-25 10:13:24,305: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udccb T\u00e2che existante trouv\u00e9e par ID: 190, statut: pending", "level": "info", "timestamp": "2025-09-25T07:13:24.305309Z"}
[2025-09-25 10:13:24,372: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udcca Nouveau run cr\u00e9\u00e9: ID 433", "level": "info", "timestamp": "2025-09-25T07:13:24.372326Z"}
[2025-09-25 10:13:24,432: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udccb T\u00e2che cr\u00e9\u00e9e et pr\u00eate pour workflow: Ajouter une nouvelle fonctionnalit\u00e9 de monitoring des co\u00fbts IA dans l'admin backend", "level": "info", "timestamp": "2025-09-25T07:13:24.432604Z"}
[2025-09-25 10:13:24,434: WARNING/ForkPoolWorker-1] {"event": "\ud83d\ude80 Lancement workflow pour t\u00e2che 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:24.434846Z"}
[2025-09-25 10:13:24,455: WARNING/ForkPoolWorker-1] {"event": "\u2705 Workflow lanc\u00e9 - Task ID: e9df27a1-d1c8-4dda-a9b2-d31f66ecc169", "level": "info", "timestamp": "2025-09-25T07:13:24.455512Z"}
[2025-09-25 10:13:24,740: INFO/ForkPoolWorker-1] Task ai_agent_background.process_monday_webhook[aa67daff-4175-4db3-b80c-72d139a9c98c] succeeded in 3.8816690470011963s: {'task_id': 'aa67daff-4175-4db3-b80c-72d139a9c98c', 'status': 'completed', 'result': {'success': True, 'message': 'Tâche créée avec succès - workflow géré par main.py', 'task_id': '5011841281', 'status': 'created', 'status_code': 201, 'workflow_task_id': 'e9df27a1-d1c8-4dda-a9b2-d31f66ecc169'}, 'webhook_payload': {'event': {'app': 'monday', 'type': 'update_column_value', 'triggerTime': '2025-09-25T07:13:20.889Z', 'subscriptionId': 77637367, 'isRetry': False, 'userId': 87305548, 'originalTriggerUuid': None, 'boardId': 5004578721, 'groupId': 'topics', 'pulseId': 5011841281, 'pulseName': 'Ajouter une nouvelle fonctionnalité de monitoring des coûts IA dans l\'admin backend', 'columnId': 'status', 'columnType': 'color', 'columnTitle': 'Statut', 'value': {...}, 'previousValue': None, 'changedAt': 1758784400.4606159, 'isTopGroup': True, 'triggerUuid': '76925b13589d42b049d420253be1d23d'}}, 'queue': 'webhooks'}
[2025-09-25 10:13:24,744: WARNING/ForkPoolWorker-1] {"task_id": "e9df27a1-d1c8-4dda-a9b2-d31f66ecc169", "workflow_title": "Ajouter une nouvelle fonctionnalit\u00e9 de monitoring des co\u00fbts IA dans l'admin backend", "queue": "workflows", "event": "\ud83d\udd04 D\u00e9marrage workflow LangGraph", "level": "info", "timestamp": "2025-09-25T07:13:24.744741Z"}
[2025-09-25 10:13:24,745: WARNING/ForkPoolWorker-1] {"workflow_id": "celery_e9df27a1-d1c8-4dda-a9b2-d31f66ecc169", "task_id": "5011841281", "event": "\ud83d\udcca Monitoring d\u00e9marr\u00e9 pour workflow", "level": "info", "timestamp": "2025-09-25T07:13:24.745704Z"}
[2025-09-25 10:13:24,747: WARNING/ForkPoolWorker-1] {"event": "\ud83d\ude80 D\u00e9marrage workflow workflow_5011841281_1758784404 pour: Ajouter une nouvelle fonctionnalit\u00e9 de monitoring des co\u00fbts IA dans l'admin backend", "level": "info", "timestamp": "2025-09-25T07:13:24.747651Z"}
[2025-09-25 10:13:24,848: WARNING/ForkPoolWorker-1] {"event": "\u2705 Service de persistence initialis\u00e9", "level": "info", "timestamp": "2025-09-25T07:13:24.848650Z"}
[2025-09-25 10:13:24,849: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd04 Tentative cr\u00e9ation task_run avec task_db_id=None, task_run_id=run_4369007072a5_1758784404", "level": "info", "timestamp": "2025-09-25T07:13:24.849564Z"}
[2025-09-25 10:13:24,868: WARNING/ForkPoolWorker-1] {"event": "\ud83d\ude80 Run d\u00e9marr\u00e9: 434 (UUID: workflow_5011841281_1758784404) pour t\u00e2che standalone", "level": "info", "timestamp": "2025-09-25T07:13:24.868906Z"}
[2025-09-25 10:13:24,871: WARNING/ForkPoolWorker-1] {"event": "\u2705 Task run cr\u00e9\u00e9: actual_id=434, uuid=run_4369007072a5_1758784404", "level": "info", "timestamp": "2025-09-25T07:13:24.871257Z"}
[2025-09-25 10:13:24,876: WARNING/ForkPoolWorker-1] {"event": "\u2705 Graphe de workflow cr\u00e9\u00e9 et configur\u00e9 pour RabbitMQ avec nouveaux n\u0153uds", "level": "info", "timestamp": "2025-09-25T07:13:24.876111Z"}
[2025-09-25 10:13:25,638: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd27 Pr\u00e9paration de l'environnement pour la t\u00e2che: Ajouter une nouvelle fonctionnalit\u00e9 de monitoring des co\u00fbts IA dans l'admin backend", "level": "info", "timestamp": "2025-09-25T07:13:25.638012Z"}
[2025-09-25 10:13:25,676: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd0d Tentative d'extraction URL GitHub depuis les updates Monday.com...", "level": "info", "timestamp": "2025-09-25T07:13:25.676121Z"}
[2025-09-25 10:13:25,676: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd0d Recherche URL GitHub dans les updates Monday.com pour task 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:25.676948Z"}
[2025-09-25 10:13:27,182: INFO/ForkPoolWorker-1] HTTP Request: POST https://api.monday.com/v2 "HTTP/1.1 200 OK"
[2025-09-25 10:13:27,184: WARNING/ForkPoolWorker-1] {"event": "\u2705 Item 5011841281 trouv\u00e9, ID confirm\u00e9: 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:27.184328Z"}
[2025-09-25 10:13:27,184: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udccb 1 updates valides trouv\u00e9es pour item 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:27.184950Z"}
[2025-09-25 10:13:27,185: WARNING/ForkPoolWorker-1] {"event": "\u2705 1 updates totales (updates + replies) r\u00e9cup\u00e9r\u00e9es pour item 5011841281", "level": "info", "timestamp": "2025-09-25T07:13:27.185492Z"}
[2025-09-25 10:13:27,186: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udccb 1 updates trouv\u00e9es pour item 5011841281, recherche d'URLs GitHub...", "level": "info", "timestamp": "2025-09-25T07:13:27.186024Z"}
[2025-09-25 10:13:27,187: WARNING/ForkPoolWorker-1] {"event": "\u2705 URL repository trouv\u00e9e avec pattern 1 dans update 464101026: https://github.com/reharehavycode261/Coding-agent-test", "level": "info", "timestamp": "2025-09-25T07:13:27.186985Z"}
[2025-09-25 10:13:27,187: WARNING/ForkPoolWorker-1] {"event": "\u2705 URL GitHub extraite des updates Monday.com: https://github.com/reharehavycode261/Coding-agent-test", "level": "info", "timestamp": "2025-09-25T07:13:27.187843Z"}
[2025-09-25 10:13:27,188: WARNING/ForkPoolWorker-1] {"event": "\ud83c\udf3f G\u00e9n\u00e9ration automatique du nom de branche...", "level": "info", "timestamp": "2025-09-25T07:13:27.188462Z"}
[2025-09-25 10:13:27,190: WARNING/ForkPoolWorker-1] {"event": "\ud83c\udf3f Branche g\u00e9n\u00e9r\u00e9e avec succ\u00e8s: feature/ca77dc22-52c093-1013", "level": "info", "timestamp": "2025-09-25T07:13:27.190530Z"}
[2025-09-25 10:13:27,191: WARNING/ForkPoolWorker-1] {"event": "Configuration de l'environnement - Repo: https://github.com/reharehavycode261/Coding-agent-test, Branche: feature/ca77dc22-52c093-1013", "level": "info", "timestamp": "2025-09-25T07:13:27.191084Z"}
[2025-09-25 10:13:27,192: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udcc1 R\u00e9pertoire de travail cr\u00e9\u00e9: /var/folders/pj/n4xvnmn16yb5rktpdjk2g4pw0000gq/T/ai_agent_lve5917y", "level": "info", "timestamp": "2025-09-25T07:13:27.192288Z"}
[2025-09-25 10:13:27,210: WARNING/ForkPoolWorker-1] {"event": "Commande: git --version - Succ\u00e8s: Code: 0", "level": "info", "timestamp": "2025-09-25T07:13:27.210668Z"}
[2025-09-25 10:13:27,211: WARNING/ForkPoolWorker-1] {"event": "\u2705 Git disponible: git version 2.48.1", "level": "info", "timestamp": "2025-09-25T07:13:27.211748Z"}
[2025-09-25 10:13:27,228: WARNING/ForkPoolWorker-1] {"event": "Commande: git config --global user.name - Succ\u00e8s: Code: 0", "level": "info", "timestamp": "2025-09-25T07:13:27.228197Z"}
[2025-09-25 10:13:27,242: WARNING/ForkPoolWorker-1] {"event": "Commande: git config --global user.email - Succ\u00e8s: Code: 0", "level": "info", "timestamp": "2025-09-25T07:13:27.242070Z"}
[2025-09-25 10:13:27,243: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udce5 Clonage du repository: https://github.com/reharehavycode261/Coding-agent-test", "level": "info", "timestamp": "2025-09-25T07:13:27.242962Z"}
[2025-09-25 10:13:27,244: WARNING/ForkPoolWorker-1] {"event": "\ud83d\udd04 Tentative 1/5 - Clonage superficiel rapide", "level": "info", "timestamp": "2025-09-25T07:13:27.244227Z"}

worker: Warm shutdown (MainProcess)
{"worker": "celery@MBP130-SMARTELIA-2.local", "event": "\ud83d\udd04 Celery worker arr\u00eat", "level": "info", "timestamp": "2025-09-25T07:13:59.304208Z"}


[2025-09-25 10:13:59,925: ERROR/MainProcess] Process 'ForkPoolWorker-1' pid:37736 exited with 'signal 15 (SIGTERM)'
